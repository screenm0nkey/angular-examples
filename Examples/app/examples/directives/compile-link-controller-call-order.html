<!doctype html>
<html ng-app="myApp">
<head>
  <script src="/lib/angular/angular.js"></script>
</head>
<body>

  <div ng-controller="MyCtrl">
    d1 compile
    d2 compile
    d3 compile
    d1 ctrl
    d2 ctrl
    d3 ctrl
    d3 link
    d2 link
    d1 link
    <div d1>
      <div d2>
        <div d3></div>
      </div>
    </div>


    d1 compile
    d2 compile
    d3 compile
    d1 ctrl
    d1 link
    d2 ctrl
    d2 link
    d3 ctrl
    d3 link
    <div d1></div>
    <div d2></div>
    <div d3></div>

  </div>

  <script>
  // this exmaple shows when the linking and controllers are called
    var myApp = angular.module('myApp',[]);

    function MyCtrl($scope) {}


    myApp.directive('d1', function() {
     return {
      compile : function () {
        console.log('d1 compile');
        return function link () {
          console.log('d1 link');
        }
      },
      controller: function($scope) {
       console.log('d1 ctrl');
     },
   }
 });

    myApp.directive('d2', function() {
     return {
      compile : function () {
        console.log('d2 compile');
        return function link () {
          console.log('d2 link');
        }
      },
      controller: function($scope) {
       console.log('d2 ctrl');
     },
   }
 });

    myApp.directive('d3', function() {
     return {
      compile : function () {
        console.log('d3 compile');
        return function link () {
          console.log('d3 link');
        }
      },
      controller: function($scope) {
       console.log('d3 ctrl');
     },
   }
 });




    </script>
  </body>
  </html>