<!doctype html>
<html ng-app="app">
<head>
  <script src="/lib/angular/angular.js"></script>
</head>
<body>
  <double>
   <h4>{{hello}} - 2</h4>
  </double>

  <ntimes repeat=5>
      <p>{{hello}} - {{count}}</p>
      <p>More text</p>
  </ntimes>

  <script>
  var app = angular.module('app', []);

  app.directive('double', function() {
   return {
     restrict: 'E',
     compile: function(tElement, attrs) {
       var content = tElement.children();
       tElement.append(content.clone());
       tElement.replaceWith(tElement.children());
       // link function
       return function(scope, element, attributes, controller) {
          scope.hello = "Alright";
       }
     }
   }
 });

  app.directive('ntimes', function() {
   return {
     restrict: 'E',
     compile: function(tElement, attrs) {
       var content = tElement.children();
       for (var i = 0; i < attrs.repeat - 1; i++) {
         tElement.append(content.clone());
       }
       tElement.replaceWith(tElement.children());
       // link function
       return function(scope, element, attributes, controller) {
          // debugger at this point you will see all the dom elements before
          // interpolation
          scope.count = attributes.repeat;
          scope.hello = "Bumfight";
       }
     }
   }
 });

  </script>
</body>
</html>